<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sendEmail</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" 
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous">
    </script>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
    </script>
</head>
<body>
    <form>
        
        <input type="text" name="mail_title" placeholder="제목을 입력해주세요">
        <input type="text" name="name" placeholder="이름을 입력해주세요">
        <input type="text" name="email" placeholder="메일 주소를 입력해주세요">
        <input type="text" name="phone" placeholder="연락처를 입력해주세요 (생략 가능)">
        <input type="text" name="discovery_area" placeholder="발견 지역을 입력해주세요">
        <input type="text" name="discovery_place" placeholder="발견 장소입력해주세요">
        <textarea name="message" rows="5" placeholder="발견 상황을 입력해주세요 "></textarea>
        
        <input type="button" name="submit" class="btn white" value="신고하기"/>
    </form>
    
    <script type="text/javascript">
    $(document).ready(function() {//문서가 준비되면 매개변수로 넣은 콜백 함수를 실행하라는 의미
		emailjs.init("2ZTA5oydKFIe-cAOr");//키
        //ㅗ
        $('input[name=submit]').click(function(){//신고하기 버튼을 클릭했을 때
        alert('예진바보');
        var templateParams = {	//객체 생성
          //각 요소는 emailJS에서 설정한 템플릿과 동일한 명으로 작성!
                mail_title: $('input[name=mail_title]').val(),
                name: $('input[name=name]').val(),
                email : $('input[name=email]').val(),
                phone: $('input[name=phone]').val(), 
                discovery_area: $('input[name=discovery_area]').val(), 
                discovery_place: $('input[name=discovery_place]').val(), 
                message : $('textarea[name=message]').val()
        };

        emailjs.send('gmail', 'template_w2pl6go', templateParams)//emailJS를 사용해 이메일 전송
         //emailjs.send('service ID', 'template ID', 보낼 내용이 담긴 객체)
        .then(function(response) {//전송 성공 시 실행되는 콜백 함수
        console.log('SUCCESS!', response.status, response.text);
        }, 
        function(error) {//전송 실패 시 실행되는 콜백 함수
        console.log('FAILED...', error);
        });
        });
	});;
</script>
</body>
</html>